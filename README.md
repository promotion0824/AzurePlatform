# Azure Platform Team Mono Repo

Contains services managed by the platform team.

| Product                       | Description                                                                                                                                      | Pipeline                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AzureRoles                    |  Custom roles and assignment used within Azure Subscription    |        [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/AzureRoles?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=759&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| BackstageApp                  |    Code and hosting for [Willow Backstage](http://backstage.devservices.willowinc.com/)                                                                                                                                              |              [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Backstage?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=758&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Bicep\DeploymentDataStorage   |       Storage for state based deployment used by pulumi and terraform, as well as keyvaults related to deployments                                                                                                                                           |        [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/DeploymentDataStorage?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=742&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Bicep\Policies                |   Policies that get applied to azure subscriptions, `Note: AKS policies live with the SharedCluster/Pulumi resources`                                                                                                                                                |       [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Policies?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=756&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Bicep\SubscriptionDiagnostics |    Subscription level diagnostics settings to send audit events to storage                                                                                                                                              |        [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/SubscriptionDiagnostics?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=757&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Cleanup                       | Cleanup of azure resources, primarily used for Ephemeral Environment garbage collection                                                          | Build: [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Cleanup.Build?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=753&branchName=main) Run: [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Cleanup.Run?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=754&branchName=main) |
| Costing                       | Export of log and ADX cost data from Kusto based Log analytics                                                                                   | [![DevOpsIntegrationServices-build-deploy](https://github.com/WillowInc/AzurePlatform/actions/workflows/costing-build-deploy.yml/badge.svg)](https://github.com/WillowInc/AzurePlatform/actions/workflows/costing-build-deploy.yml)                                                                                                                                                                                                                    |
| DevOpsIntegrationServices     | API's for integration with devops, primarily used for Ephemeral Environment Gates                                                                | [![DevOpsIntegrationServices-build-deploy](https://github.com/WillowInc/AzurePlatform/actions/workflows/devopsintegrationsservices-build-deploy.yml/badge.svg)](https://github.com/WillowInc/AzurePlatform/actions/workflows/devopsintegrationsservices-build-deploy.yml)                                                                                                                                                                                                                      |
| Dns                           | NOT YET MIGRATED TO GITHUB                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| EphemeralEnvironments         | NOT YET MIGRATED TO GITHUB                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Grafana                       | Grafana helm chart and dashboards                                                                                                                | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Grafana?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=751&branchName=main)                                                                                                                                                                                                                                        |
| Kroki                         | Helm chart to install [yuzutech/kroki](https://github.com/yuzutech/kroki) to support rendering of Diagrams for MkDocs                            | [![build-deploy](https://github.com/WillowInc/AzurePlatform/actions/workflows/kroki-build-deploy.yml/badge.svg)](https://github.com/WillowInc/AzurePlatform/actions/workflows/kroki-build-deploy.yml)                                                                                                                                                                                                                                          |
| MkDocs                        | Local MkDocs plugins and resources used within the build docs templates                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| OpensourcePortal              | Provides access to Githubis a hosted copy of [microsoft/opensource-management-portal](https://github.com/microsoft/opensource-management-portal) | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/OpensourcePortal?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=749&branchName=main)                                                                                                                                                                                                                               |
| PoCs                          | Code used to demonstrate ideas and complete spikes, kept for historical reference                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| RenovateBot                   | Runs a self hosted copy of renovate on a schedule to update Azure Devops Repositories                                                            | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Renovate?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=740&branchName=main)                                                                                                                                                                                                                                       |
| Scripts                       | Ad Hoc scripts used to complete tasks that have not been automated                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| SharedClusters\Pulumi         | Pulumi resources managing Aks and ADX clusters shared by multiple teams                                                                          | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/SharedClusters.Pulumi?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=744&branchName=main)                                                                                                                                                                                                                          |
| SharedClusters\Helm           | Helm charts that get deployed to all clusters and not part of a specific application/ service                                                    | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/SharedClusters.Helm?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=745&branchName=main)                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Telepresence                  | Telepresence install used for [Ephemeral Environments](https://willow.atlassian.net/wiki/spaces/DOCS/pages/2203877485/Ephemeral+Environments)    | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Telepresence?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=747&branchName=main)                                                                                                                                                                                                                                   |
| Wilbur                        | Willow ops but used to manage temporary access to resources and other Chat Ops tasks                                                             | [![Build Status](https://dev.azure.com/willowdev/AzurePlatform/_apis/build/status/Github/Wilbur?branchName=main)](https://dev.azure.com/willowdev/AzurePlatform/_build/latest?definitionId=748&branchName=main)                                                                                                                                                                                                                                         |

# Git Hooks

Git hooks are managed using Husky as chosen by RFC 72 https://github.com/WillowInc/rfcs/discussions/72

After cloning the repo ensure you install hooks by running `npm install`
